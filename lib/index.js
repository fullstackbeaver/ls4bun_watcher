// @bun
import*as B from"fs";var x={},C={},D={};async function G(k,j){if(j){for(let[z,q]of Object.entries(j))x[z]=q.action,q.useOnFirstStart&&q.action();Object.assign(C,k)}Object.assign(D,Bun.serve(k)),console.log("server started!")}async function E(k){console.log("Reloading server...",k);for(let j of k)if(x[j])x[j].constructor.name==="AsyncFunction"?await x[j]():x[j]();D.reload(C),console.log("Server reloaded")}function H(k,j){for(let z of k)B.watch(z,(q,F)=>{if(q==="change")E(j(z))})}export{H as useWatcher,G as useServer,E as reloadServer};
