// @bun
import*as C from"path";import{watch as I}from"chokidar";var A={},E={},G={};async function L(b,q){if(q){for(let[B,y]of Object.entries(q))A[B]=y.action,y.useOnFirstStart&&y.action();Object.assign(E,b)}Object.assign(G,Bun.serve(b)),console.log("server started!"+b.host+":"+b.port)}async function J(b){console.log("Reloading server...",b);for(let q of b)if(A[q])A[q].constructor.name==="AsyncFunction"?await A[q]():A[q]();G.reload(E),console.log("Server reloaded")}function N(b,q){let B=I(b,{persistent:!0}),y=async(z)=>{console.log(`Change detected in the file : ${z}`),console.log(`File folder modified : ${C.dirname(z)}`);let H=[];z.endsWith(".scss")&&H.push("css"),J(q())};B.on("change",(z)=>{y(z)})}export{N as useWatcher,L as useServer,J as reloadServer};
